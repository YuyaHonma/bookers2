<main>
 <p id="notice"></p>
  <div class='container px-5 px-sm-0'>
   <div class='row'>
    <div class='col-md-3'><!-- ユーザー情報 -->
     <%= render 'books/user_info', user: @user %>
     <!-- 投稿フォーム -->
     <%= render 'books/book_form', book: @book, user: current_user %>
    </div>
    <div class='col-md-8 offset-md-1'>
     <h2>Users</h2>
      <table class='table'>
       <thead>
        <tr>
         <th>image</th>
         <th>name</th>
         <th colspan="3"></th>
        </tr>
      </thead>
  
      <tbody>
       <% @users.each do |user| %>
        <tr>
         <td>
          <% if user.avatar.attached? %>
            <%= image_tag user.avatar.variant(resize: "16x16"), class: "img-thumbnail" %>
          <% else %>
            <%= image_tag "no_image.jpg", alt: "No Image", class: "img-thumbnail", width: 50, height: 50 %>
          <% end %>
         </td>
          <td>
            <%= user.name %>
          </td>
          <td>
           <%= link_to 'Show', user_path(user), id: "showButton#{user.id}" %>
          </td>
         </tr>
            <% end %>
        </tbody>
       </table>
      </div>
     </div>
    </div>
   </main>
  <footer>
   <div class='container mt-5'>
  	<div class='row'>
    	<div class='mx-auto'>
    		<p>CopyRight Infratop.inc</p>
    	</div>
    </div>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // ページが読み込まれたときに実行される部分
    <% @users.each do |user| %>
      var showButton<%= user.id %> = document.getElementById('showButton<%= user.id %>');
      if (showButton<%= user.id %>) {
        showButton<%= user.id %>.style.color = 'blue';
        showButton<%= user.id %>.style.backgroundColor = 'white';
      }
    <% end %>
  });
</script>